<?xml version="1.0" encoding="UTF-8"?>
<faces-config
    xmlns="http://xmlns.jcp.org/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-facesconfig_2_2.xsd"
    version="2.2">
    <application>
        <resource-handler>org.omnifaces.resourcehandler.CombinedResourceHandler</resource-handler>
    </application>
   
    <!-- NAVIGATION RULES -->
    <navigation-rule>
        <from-view-id>*</from-view-id>
        <navigation-case>
            <from-outcome>updateAvailability</from-outcome>
            <to-view-id>/tutors/updateAvailability.xhtml</to-view-id>
            <redirect/>
        </navigation-case>
        <navigation-case>
            <from-outcome>updatedAvailability</from-outcome>
            <to-view-id>/tutors/updatedAvailSuccess.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>writeReview</from-outcome>
            <to-view-id>/students/writeReview.xhtml</to-view-id>
            <redirect/>
        </navigation-case>
        <navigation-case>
            <from-outcome>editRating</from-outcome>
            <to-view-id>/students/editRating.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>sessionTimer</from-outcome>
            <to-view-id>/tutors/sessionTimer.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>sessionCompleted</from-outcome>
            <to-view-id>/tutors/sessionCompleted.xhtml</to-view-id>
            <redirect/>
        </navigation-case>
        <navigation-case>
            <from-action>#{addCourseBean.addCourse}</from-action>
            <from-outcome>addCourse</from-outcome>
            <to-view-id>/tutors/addCourse.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-action>#{addNewCourseBean.addNewCourse}</from-action>
            <from-outcome>addNewCourse</from-outcome>
            <to-view-id>/tutors/addNewCourse.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-action>#{createRequestBean.createNewRequest}</from-action>
            <from-outcome>success</from-outcome>
            <to-view-id>/students/tutorsNotified.xhtml</to-view-id>
            <redirect/>
        </navigation-case>
        <navigation-case>
            <from-outcome>myPayments</from-outcome>
            <to-view-id>/accounts/myPayments.xhtml</to-view-id>
            <redirect/>
        </navigation-case>            
        <navigation-case>
            <from-outcome>chat</from-outcome>
            <to-view-id>/accounts/message.xhtml</to-view-id>
            <redirect/>
        </navigation-case>
        <navigation-case>
            <from-action>#{profileBean.goToTutorProfile(Tutor tutor)}</from-action>
            <from-outcome>success</from-outcome>
            <to-view-id>/accounts/tutorProfile.xhtml</to-view-id>
            <redirect>
                <view-param>
                    <name>username</name>
                    <value>#{profileBean.showUsername}</value>
                </view-param>
            </redirect>
        </navigation-case>
        <navigation-case>
            <from-outcome>tutorProfile</from-outcome>
            <to-view-id>/accounts/tutorProfile.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>reviewComplaint</from-outcome>
            <to-view-id>/moderators/reviewComplaint.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>submitComplaint</from-outcome>
            <to-view-id>/students/submitComplaint.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>reviewLowRatingTutor</from-outcome>
            <to-view-id>/moderators/reviewLowRatingTutor.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>moderatorApplication</from-outcome>
            <to-view-id>/moderators/reviewApplication.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-action>#{registrationBean.createUser}</from-action>
            <from-outcome>register</from-outcome>
            <to-view-id>/authentications/registration.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>changePassword</from-outcome>
            <to-view-id>/accounts/changePassword.xhtml</to-view-id>
            <redirect/>
        </navigation-case>
        <navigation-case>
            <from-outcome>updateProfile</from-outcome>
            <to-view-id>/accounts/profile.xhtml</to-view-id>
            <redirect/>
        </navigation-case>
        <navigation-case>
            <from-action>#{questionBean.askNewQuestion}</from-action>
            <from-outcome>newQuestion</from-outcome>
            <to-view-id>/forum/viewQuestion.xhtml</to-view-id>
            <redirect>
                <view-param>
                    <name>course</name>
                    <value>#{questionBean.course.courseName}</value>
                </view-param>
                <view-param>
                    <name>question</name>
                    <value>#{questionBean.question.title}</value>
                </view-param>
            </redirect>
        </navigation-case>
        <navigation-case>
            <from-action>#{questionBean.submitResponses}</from-action>
            <from-outcome>newResponse</from-outcome>
            <to-view-id>/forum/viewQuestion.xhtml</to-view-id>
            <redirect>
                <view-param>
                    <name>course</name>
                    <value>#{questionBean.responses.question.course.courseName}</value>
                </view-param>
                <view-param>
                    <name>question</name>
                    <value>#{questionBean.responses.question.title}</value>
                </view-param>
            </redirect>
        </navigation-case>
        <navigation-case>
            <from-action>#{transcriptBean.generatePresignedUrlRequest}</from-action>
            <from-outcome>viewFile</from-outcome>
            <to-view-id>/tutors/viewTranscript.xhtml</to-view-id>
            <redirect>
                <view-param>
                    <name>url</name>
                    <value>#{transcriptBean.URL}</value>
                </view-param>
            </redirect>
        </navigation-case>
        <navigation-case>
            <from-action>#{userBean.login}</from-action>
            <from-outcome>success</from-outcome>
            <to-view-id>/accounts/index.xhtml</to-view-id>
            <redirect/>
        </navigation-case>
        <navigation-case>
            <from-action>#{userBean.logout}</from-action>
            <from-outcome>success</from-outcome>
            <to-view-id>/accounts/index.xhtml</to-view-id>
            <redirect/>
        </navigation-case>
        <navigation-case>
            <from-outcome>success</from-outcome>
            <to-view-id>/accounts/index.xhtml</to-view-id>
            <redirect/>
        </navigation-case>
        <navigation-case>
            <from-outcome>failure</from-outcome>
            <to-view-id>/errors/internal.xhtml</to-view-id>
        </navigation-case>
    </navigation-rule>
</faces-config>